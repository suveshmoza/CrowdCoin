{"ast":null,"code":"import _regeneratorRuntime from \"/home/suveshmoza/Stuff/Projects/kickstart/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/suveshmoza/Stuff/Projects/kickstart/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/home/suveshmoza/Stuff/Projects/kickstart/components/ContributeForm.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport { Form, Input, Message, Button } from \"semantic-ui-react\";\nimport Campaign from \"../ethereum/campaign\";\nimport web3 from \"../ethereum/web3\";\nimport { Router } from \"../routes\";\n\nvar ContributeForm = function ContributeForm(_ref) {\n  _s();\n\n  var address = _ref.address;\n\n  var _useState = useState(\"\"),\n      value = _useState[0],\n      setValue = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      errorMsg = _useState2[0],\n      setErrorMsg = _useState2[1];\n\n  var _useState3 = useState(false),\n      loading = _useState3[0],\n      setLoading = _useState3[1];\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      var campaign, accounts;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              setLoading(true);\n              campaign = Campaign(address);\n              _context.prev = 3;\n              _context.next = 6;\n              return web3.eth.getAccounts();\n\n            case 6:\n              accounts = _context.sent;\n              _context.next = 9;\n              return campaign.methods.contribute().send({\n                from: accounts[0],\n                value: web3.utils.toWei(value, \"ether\")\n              });\n\n            case 9:\n              Router.replaceRoute(\"/campaigns/\".concat(address));\n              _context.next = 15;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](3);\n              setErrorMsg(_context.t0.message);\n\n            case 15:\n              setLoading(false), setValue(\"\");\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[3, 12]]);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Form, {\n    onSubmit: onSubmit,\n    error: !!errorMsg,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 3\n    }\n  }, __jsx(Form.Field, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 4\n    }\n  }, __jsx(\"label\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 5\n    }\n  }, \"Amount to Contribute\"), __jsx(Input, {\n    value: value,\n    onChange: function onChange(event) {\n      return setValue(event.target.value);\n    },\n    label: \"ether\",\n    labelPosition: \"right\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 5\n    }\n  }), __jsx(Message, {\n    error: true,\n    header: \"OOPS!\",\n    content: errorMsg,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 5\n    }\n  })), __jsx(Button, {\n    primary: true,\n    loading: loading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 4\n    }\n  }, \"Contribute!\"));\n};\n\n_s(ContributeForm, \"cy7Xav7KLMhtCPl8oHuLvpygIwo=\");\n\n_c = ContributeForm;\nexport default ContributeForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"ContributeForm\");","map":{"version":3,"sources":["/home/suveshmoza/Stuff/Projects/kickstart/components/ContributeForm.js"],"names":["React","useState","Form","Input","Message","Button","Campaign","web3","Router","ContributeForm","address","value","setValue","errorMsg","setErrorMsg","loading","setLoading","onSubmit","event","preventDefault","campaign","eth","getAccounts","accounts","methods","contribute","send","from","utils","toWei","replaceRoute","message","target"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,IAAT,EAAeC,KAAf,EAAsBC,OAAtB,EAA+BC,MAA/B,QAA6C,mBAA7C;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,OAAOC,IAAP,MAAiB,kBAAjB;AACA,SAASC,MAAT,QAAuB,WAAvB;;AAEA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,OAAiB;AAAA;;AAAA,MAAdC,OAAc,QAAdA,OAAc;;AAAA,kBACbT,QAAQ,CAAC,EAAD,CADK;AAAA,MAChCU,KADgC;AAAA,MACzBC,QADyB;;AAAA,mBAEPX,QAAQ,CAAC,EAAD,CAFD;AAAA,MAEhCY,QAFgC;AAAA,MAEtBC,WAFsB;;AAAA,mBAGTb,QAAQ,CAAC,KAAD,CAHC;AAAA,MAGhCc,OAHgC;AAAA,MAGvBC,UAHuB;;AAKvC,MAAMC,QAAQ;AAAA,yEAAG,iBAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAChBA,cAAAA,KAAK,CAACC,cAAN;AACAH,cAAAA,UAAU,CAAC,IAAD,CAAV;AACMI,cAAAA,QAHU,GAGCd,QAAQ,CAACI,OAAD,CAHT;AAAA;AAAA;AAAA,qBAKQH,IAAI,CAACc,GAAL,CAASC,WAAT,EALR;;AAAA;AAKTC,cAAAA,QALS;AAAA;AAAA,qBAMTH,QAAQ,CAACI,OAAT,CAAiBC,UAAjB,GAA8BC,IAA9B,CAAmC;AACxCC,gBAAAA,IAAI,EAAEJ,QAAQ,CAAC,CAAD,CAD0B;AAExCZ,gBAAAA,KAAK,EAAEJ,IAAI,CAACqB,KAAL,CAAWC,KAAX,CAAiBlB,KAAjB,EAAwB,OAAxB;AAFiC,eAAnC,CANS;;AAAA;AAUfH,cAAAA,MAAM,CAACsB,YAAP,sBAAkCpB,OAAlC;AAVe;AAAA;;AAAA;AAAA;AAAA;AAYfI,cAAAA,WAAW,CAAC,YAAIiB,OAAL,CAAX;;AAZe;AAchBf,cAAAA,UAAU,CAAC,KAAD,CAAV,EAAmBJ,QAAQ,CAAC,EAAD,CAA3B;;AAdgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAARK,QAAQ;AAAA;AAAA;AAAA,KAAd;;AAiBA,SACC,MAAC,IAAD;AAAM,IAAA,QAAQ,EAAEA,QAAhB;AAA0B,IAAA,KAAK,EAAE,CAAC,CAACJ,QAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC,MAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BADD,EAEC,MAAC,KAAD;AACC,IAAA,KAAK,EAAEF,KADR;AAEC,IAAA,QAAQ,EAAE,kBAACO,KAAD;AAAA,aAAWN,QAAQ,CAACM,KAAK,CAACc,MAAN,CAAarB,KAAd,CAAnB;AAAA,KAFX;AAGC,IAAA,KAAK,EAAC,OAHP;AAIC,IAAA,aAAa,EAAC,OAJf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFD,EAQC,MAAC,OAAD;AAAS,IAAA,KAAK,MAAd;AAAe,IAAA,MAAM,EAAC,OAAtB;AAA8B,IAAA,OAAO,EAAEE,QAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IARD,CADD,EAWC,MAAC,MAAD;AAAQ,IAAA,OAAO,MAAf;AAAgB,IAAA,OAAO,EAAEE,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAXD,CADD;AAiBA,CAvCD;;GAAMN,c;;KAAAA,c;AAwCN,eAAeA,cAAf","sourcesContent":["import React, { useState } from \"react\";\nimport { Form, Input, Message, Button } from \"semantic-ui-react\";\nimport Campaign from \"../ethereum/campaign\";\nimport web3 from \"../ethereum/web3\";\nimport { Router } from \"../routes\";\n\nconst ContributeForm = ({ address }) => {\n\tconst [value, setValue] = useState(\"\");\n\tconst [errorMsg, setErrorMsg] = useState(\"\");\n\tconst [loading, setLoading] = useState(false);\n\n\tconst onSubmit = async (event) => {\n\t\tevent.preventDefault();\n\t\tsetLoading(true);\n\t\tconst campaign = Campaign(address);\n\t\ttry {\n\t\t\tconst accounts = await web3.eth.getAccounts();\n\t\t\tawait campaign.methods.contribute().send({\n\t\t\t\tfrom: accounts[0],\n\t\t\t\tvalue: web3.utils.toWei(value, \"ether\"),\n\t\t\t});\n\t\t\tRouter.replaceRoute(`/campaigns/${address}`);\n\t\t} catch (err) {\n\t\t\tsetErrorMsg(err.message);\n\t\t}\n\t\tsetLoading(false), setValue(\"\");\n\t};\n\n\treturn (\n\t\t<Form onSubmit={onSubmit} error={!!errorMsg}>\n\t\t\t<Form.Field>\n\t\t\t\t<label>Amount to Contribute</label>\n\t\t\t\t<Input\n\t\t\t\t\tvalue={value}\n\t\t\t\t\tonChange={(event) => setValue(event.target.value)}\n\t\t\t\t\tlabel=\"ether\"\n\t\t\t\t\tlabelPosition=\"right\"\n\t\t\t\t/>\n\t\t\t\t<Message error header=\"OOPS!\" content={errorMsg} />\n\t\t\t</Form.Field>\n\t\t\t<Button primary loading={loading}>\n\t\t\t\tContribute!\n\t\t\t</Button>\n\t\t</Form>\n\t);\n};\nexport default ContributeForm;\n"]},"metadata":{},"sourceType":"module"}