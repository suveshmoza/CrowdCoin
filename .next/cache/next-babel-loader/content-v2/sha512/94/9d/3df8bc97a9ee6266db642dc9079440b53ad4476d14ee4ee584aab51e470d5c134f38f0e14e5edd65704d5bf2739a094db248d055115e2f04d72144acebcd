{"ast":null,"code":"import _regeneratorRuntime from \"/home/suveshmoza/Stuff/Projects/kickstart/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/suveshmoza/Stuff/Projects/kickstart/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/home/suveshmoza/Stuff/Projects/kickstart/pages/campaigns/requests/index.js\",\n    _this = this;\n\nvar __jsx = React.createElement;\nimport React from \"react\";\nimport { Button, Table } from \"semantic-ui-react\";\nimport { Link } from \"../../../routes\";\nimport Layout from \"../../../components/Layout\";\nimport Campaign from \"../../../ethereum/campaign\";\nimport RequestRow from \"../../../components/RequestRow\";\n\nvar RequestIndex = function RequestIndex(_ref) {\n  var address = _ref.address,\n      requests = _ref.requests,\n      requestCount = _ref.requestCount,\n      approversCount = _ref.approversCount;\n  var Header = Table.Header,\n      Row = Table.Row,\n      HeaderCell = Table.HeaderCell,\n      Body = Table.Body;\n  console.log(requestCount);\n\n  var renderRow = function renderRow() {\n    return requests.map(function (request, index) {\n      return __jsx(RequestRow, {\n        id: index,\n        request: request,\n        approversCount: approversCount,\n        address: address,\n        key: index,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 14,\n          columnNumber: 5\n        }\n      });\n    });\n  };\n\n  return __jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 3\n    }\n  }, __jsx(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 4\n    }\n  }, \"Request List\"), __jsx(Link, {\n    route: \"/campaigns/\".concat(address, \"/requests/new\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 4\n    }\n  }, __jsx(\"a\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 5\n    }\n  }, __jsx(Button, {\n    primary: true,\n    floated: \"right\",\n    style: {\n      marginBottom: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 6\n    }\n  }, \"Add Requests\"))), __jsx(Table, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 4\n    }\n  }, __jsx(Header, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 5\n    }\n  }, __jsx(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 6\n    }\n  }, __jsx(HeaderCell, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }\n  }, \"ID\"), __jsx(HeaderCell, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }\n  }, \"Description\"), __jsx(HeaderCell, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }\n  }, \"Amount\"), __jsx(HeaderCell, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, \"Recipient\"), __jsx(HeaderCell, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }, \"Approval Count\"), __jsx(HeaderCell, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }, \"Approve\"), __jsx(HeaderCell, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, \"Finalize\"))), __jsx(Body, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 5\n    }\n  }, renderRow())), __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 4\n    }\n  }, \"Found \", requestCount, \" requests\"));\n};\n\n_c = RequestIndex;\n\nRequestIndex.getInitialProps = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(props) {\n    var address, campaign, requestCount, approversCount, requests;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            address = props.query.address;\n            campaign = Campaign(address);\n            _context.next = 4;\n            return campaign.methods.getRequestsCount().call();\n\n          case 4:\n            requestCount = _context.sent;\n            _context.next = 7;\n            return campaign.methods.approversCount().call();\n\n          case 7:\n            approversCount = _context.sent;\n            _context.next = 10;\n            return Promise.all(Array(requestCount).fill().map(function (element, index) {\n              return campaign.methods.requests(index).call();\n            }));\n\n          case 10:\n            requests = _context.sent;\n            return _context.abrupt(\"return\", {\n              address: address,\n              requests: requests,\n              requestCount: requestCount,\n              approversCount: approversCount\n            });\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport default RequestIndex;\n\nvar _c;\n\n$RefreshReg$(_c, \"RequestIndex\");","map":{"version":3,"sources":["/home/suveshmoza/Stuff/Projects/kickstart/pages/campaigns/requests/index.js"],"names":["React","Button","Table","Link","Layout","Campaign","RequestRow","RequestIndex","address","requests","requestCount","approversCount","Header","Row","HeaderCell","Body","console","log","renderRow","map","request","index","marginBottom","getInitialProps","props","query","campaign","methods","getRequestsCount","call","Promise","all","Array","fill","element"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Button, Table } from \"semantic-ui-react\";\nimport { Link } from \"../../../routes\";\nimport Layout from \"../../../components/Layout\";\nimport Campaign from \"../../../ethereum/campaign\";\nimport RequestRow from \"../../../components/RequestRow\";\n\nconst RequestIndex = ({ address, requests, requestCount, approversCount }) => {\n\tconst { Header, Row, HeaderCell, Body } = Table;\n\tconsole.log(requestCount);\n\tconst renderRow = () => {\n\t\treturn requests.map((request, index) => {\n\t\t\treturn (\n\t\t\t\t<RequestRow\n\t\t\t\t\tid={index}\n\t\t\t\t\trequest={request}\n\t\t\t\t\tapproversCount={approversCount}\n\t\t\t\t\taddress={address}\n\t\t\t\t\tkey={index}\n\t\t\t\t/>\n\t\t\t);\n\t\t});\n\t};\n\n\treturn (\n\t\t<Layout>\n\t\t\t<h3>Request List</h3>\n\t\t\t<Link route={`/campaigns/${address}/requests/new`}>\n\t\t\t\t<a>\n\t\t\t\t\t<Button primary floated=\"right\" style={{ marginBottom: 10 }}>\n\t\t\t\t\t\tAdd Requests\n\t\t\t\t\t</Button>\n\t\t\t\t</a>\n\t\t\t</Link>\n\t\t\t<Table>\n\t\t\t\t<Header>\n\t\t\t\t\t<Row>\n\t\t\t\t\t\t<HeaderCell>ID</HeaderCell>\n\t\t\t\t\t\t<HeaderCell>Description</HeaderCell>\n\t\t\t\t\t\t<HeaderCell>Amount</HeaderCell>\n\t\t\t\t\t\t<HeaderCell>Recipient</HeaderCell>\n\t\t\t\t\t\t<HeaderCell>Approval Count</HeaderCell>\n\t\t\t\t\t\t<HeaderCell>Approve</HeaderCell>\n\t\t\t\t\t\t<HeaderCell>Finalize</HeaderCell>\n\t\t\t\t\t</Row>\n\t\t\t\t</Header>\n\t\t\t\t<Body>{renderRow()}</Body>\n\t\t\t</Table>\n\t\t\t<div>Found {requestCount} requests</div>\n\t\t</Layout>\n\t);\n};\n\nRequestIndex.getInitialProps = async (props) => {\n\tconst { address } = props.query;\n\tconst campaign = Campaign(address);\n\tconst requestCount = await campaign.methods.getRequestsCount().call();\n\tconst approversCount = await campaign.methods.approversCount().call();\n\tconst requests = await Promise.all(\n\t\tArray(requestCount)\n\t\t\t.fill()\n\t\t\t.map((element, index) => {\n\t\t\t\treturn campaign.methods.requests(index).call();\n\t\t\t})\n\t);\n\treturn { address, requests, requestCount, approversCount };\n};\n\nexport default RequestIndex;\n"]},"metadata":{},"sourceType":"module"}