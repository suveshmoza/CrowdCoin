{"ast":null,"code":"import _regeneratorRuntime from \"/home/suveshmoza/Stuff/Projects/kickstart/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/suveshmoza/Stuff/Projects/kickstart/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/home/suveshmoza/Stuff/Projects/kickstart/pages/campaigns/requests/new.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n// continue from 201\nimport React, { useState } from \"react\";\nimport { Form, Button, Message, Input } from \"semantic-ui-react\";\nimport Campaign from \"../../../ethereum/campaign\";\nimport web3 from \"../../../ethereum/web3\";\nimport { Link, Router } from \"../../../routes\";\nimport Layout from \"../../../components/Layout\";\n\nvar RequestNew = function RequestNew(_ref) {\n  _s();\n\n  var address = _ref.address;\n\n  var _useState = useState(\"\"),\n      value = _useState[0],\n      setValue = _useState[1];\n\n  var _useState2 = useState(\"\"),\n      description = _useState2[0],\n      setDescription = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      recipient = _useState3[0],\n      setRecipient = _useState3[1];\n\n  var _useState4 = useState(false),\n      loading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      errorMsg = _useState5[0],\n      setErrorMsg = _useState5[1];\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      var campaign, accounts;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              campaign = Campaign(address);\n              setLoading(true);\n              setErrorMsg(\"\");\n              _context.prev = 4;\n              _context.next = 7;\n              return web3.eth.getAccounts();\n\n            case 7:\n              accounts = _context.sent;\n              _context.next = 10;\n              return campaign.methods.createRequest(description, web3.utils.toWei(value, \"ether\"), recipient).send({\n                from: accounts[0]\n              });\n\n            case 10:\n              Router.pushRoute(\"/campaigns/\".concat(address, \"/requests\"));\n              _context.next = 16;\n              break;\n\n            case 13:\n              _context.prev = 13;\n              _context.t0 = _context[\"catch\"](4);\n              setErrorMsg(_context.t0.message);\n\n            case 16:\n              setLoading(false);\n\n            case 17:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[4, 13]]);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 3\n    }\n  }, __jsx(Link, {\n    route: \"/campaigns/\".concat(address, \"/requests\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 4\n    }\n  }, __jsx(\"a\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 5\n    }\n  }, \"Back\")), __jsx(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 4\n    }\n  }, \"Create a Request\"), __jsx(Form, {\n    error: !!errorMsg,\n    onSubmit: onSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 4\n    }\n  }, __jsx(Form.Field, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 5\n    }\n  }, __jsx(\"label\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 6\n    }\n  }, \"Description\"), __jsx(Input, {\n    value: description,\n    onChange: function onChange(e) {\n      setDescription(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 6\n    }\n  })), __jsx(Form.Field, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, __jsx(\"label\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 6\n    }\n  }, \"Value in Ether\"), __jsx(Input, {\n    value: value,\n    onChange: function onChange(e) {\n      setValue(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 6\n    }\n  })), __jsx(Form.Field, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 5\n    }\n  }, __jsx(\"label\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 6\n    }\n  }, \"Recipient\"), __jsx(Input, {\n    value: recipient,\n    onChange: function onChange(e) {\n      setRecipient(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 6\n    }\n  })), __jsx(Message, {\n    error: true,\n    header: \"OOPS!\",\n    content: errorMsg,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }), __jsx(Button, {\n    primary: true,\n    loading: loading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, \"Create!\")));\n};\n\n_s(RequestNew, \"dAaFQHf/TFHZ495keML6W2JMGgg=\");\n\n_c = RequestNew;\n\nRequestNew.getInitialProps = function (props) {\n  var address = props.query.address;\n  return {\n    address: address\n  };\n};\n\nexport default RequestNew;\n\nvar _c;\n\n$RefreshReg$(_c, \"RequestNew\");","map":{"version":3,"sources":["/home/suveshmoza/Stuff/Projects/kickstart/pages/campaigns/requests/new.js"],"names":["React","useState","Form","Button","Message","Input","Campaign","web3","Link","Router","Layout","RequestNew","address","value","setValue","description","setDescription","recipient","setRecipient","loading","setLoading","errorMsg","setErrorMsg","onSubmit","event","preventDefault","campaign","eth","getAccounts","accounts","methods","createRequest","utils","toWei","send","from","pushRoute","message","e","target","getInitialProps","props","query"],"mappings":"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","sourcesContent":["// continue from 201\nimport React, { useState } from \"react\";\nimport { Form, Button, Message, Input } from \"semantic-ui-react\";\nimport Campaign from \"../../../ethereum/campaign\";\nimport web3 from \"../../../ethereum/web3\";\nimport { Link, Router } from \"../../../routes\";\nimport Layout from \"../../../components/Layout\";\n\nconst RequestNew = ({ address }) => {\n\tconst [value, setValue] = useState(\"\");\n\tconst [description, setDescription] = useState(\"\");\n\tconst [recipient, setRecipient] = useState(\"\");\n\tconst [loading, setLoading] = useState(false);\n\tconst [errorMsg, setErrorMsg] = useState(\"\");\n\n\tconst onSubmit = async (event) => {\n\t\tevent.preventDefault();\n\t\tconst campaign = Campaign(address);\n\t\tsetLoading(true);\n\t\tsetErrorMsg(\"\");\n\t\ttry {\n\t\t\tconst accounts = await web3.eth.getAccounts();\n\t\t\tawait campaign.methods\n\t\t\t\t.createRequest(description, web3.utils.toWei(value, \"ether\"), recipient)\n\t\t\t\t.send({ from: accounts[0] });\n\t\t\tRouter.pushRoute(`/campaigns/${address}/requests`);\n\t\t} catch (err) {\n\t\t\tsetErrorMsg(err.message);\n\t\t}\n\t\tsetLoading(false);\n\t};\n\n\treturn (\n\t\t<Layout>\n\t\t\t<Link route={`/campaigns/${address}/requests`}>\n\t\t\t\t<a>Back</a>\n\t\t\t</Link>\n\t\t\t<h3>Create a Request</h3>\n\t\t\t<Form error={!!errorMsg} onSubmit={onSubmit}>\n\t\t\t\t<Form.Field>\n\t\t\t\t\t<label>Description</label>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tvalue={description}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tsetDescription(e.target.value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</Form.Field>\n\t\t\t\t<Form.Field>\n\t\t\t\t\t<label>Value in Ether</label>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tsetValue(e.target.value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</Form.Field>\n\t\t\t\t<Form.Field>\n\t\t\t\t\t<label>Recipient</label>\n\t\t\t\t\t<Input\n\t\t\t\t\t\tvalue={recipient}\n\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\tsetRecipient(e.target.value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</Form.Field>\n\t\t\t\t<Message error header=\"OOPS!\" content={errorMsg} />\n\t\t\t\t<Button primary loading={loading}>\n\t\t\t\t\tCreate!\n\t\t\t\t</Button>\n\t\t\t</Form>\n\t\t</Layout>\n\t);\n};\n\nRequestNew.getInitialProps = (props) => {\n\tconst { address } = props.query;\n\treturn { address };\n};\n\nexport default RequestNew;\n"]},"metadata":{},"sourceType":"module"}